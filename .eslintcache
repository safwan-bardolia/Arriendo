[{"C:\\react\\arriendo\\src\\index.js":"1","C:\\react\\arriendo\\src\\serviceWorker.js":"2","C:\\react\\arriendo\\src\\app\\store.js":"3","C:\\react\\arriendo\\src\\components\\App.js":"4","C:\\react\\arriendo\\src\\features\\userSlice.js":"5","C:\\react\\arriendo\\src\\firebase.js":"6","C:\\react\\arriendo\\src\\components\\Login.js":"7","C:\\react\\arriendo\\src\\components\\Nav.js":"8","C:\\react\\arriendo\\src\\components\\Banner.js":"9","C:\\react\\arriendo\\src\\api\\hostingApi.js":"10","C:\\react\\arriendo\\src\\components\\Map.js":"11","C:\\react\\arriendo\\src\\components\\HostingForm.js":"12","C:\\react\\arriendo\\src\\features\\positionSlice.js":"13","C:\\react\\arriendo\\src\\components\\Footer.js":"14","C:\\react\\arriendo\\src\\components\\Home.js":"15","C:\\react\\arriendo\\src\\components\\Card.js":"16","C:\\react\\arriendo\\src\\components\\HostingInfo.js":"17","C:\\react\\arriendo\\src\\components\\HostMain.js":"18","C:\\react\\arriendo\\src\\components\\HostingProfile.js":"19","C:\\react\\arriendo\\src\\api\\hostingLocationApi.js":"20","C:\\react\\arriendo\\src\\components\\ProfileMap.js":"21","C:\\react\\arriendo\\src\\components\\UpdateMap.js":"22","C:\\react\\arriendo\\src\\components\\NearbyLocation.js":"23"},{"size":655,"mtime":1608878335259,"results":"24","hashOfConfig":"25"},{"size":5141,"mtime":499162500000,"results":"26","hashOfConfig":"25"},{"size":273,"mtime":1611250233022,"results":"27","hashOfConfig":"25"},{"size":3175,"mtime":1621175440889,"results":"28","hashOfConfig":"25"},{"size":978,"mtime":1608878157204,"results":"29","hashOfConfig":"25"},{"size":927,"mtime":1619893241441,"results":"30","hashOfConfig":"25"},{"size":1650,"mtime":1610361977006,"results":"31","hashOfConfig":"25"},{"size":2210,"mtime":1621175633284,"results":"32","hashOfConfig":"25"},{"size":584,"mtime":1621175577365,"results":"33","hashOfConfig":"25"},{"size":101,"mtime":1609237294150,"results":"34","hashOfConfig":"25"},{"size":6142,"mtime":1620553402589,"results":"35","hashOfConfig":"25"},{"size":22678,"mtime":1620727617843,"results":"36","hashOfConfig":"25"},{"size":850,"mtime":1609609979086,"results":"37","hashOfConfig":"25"},{"size":283,"mtime":1609940588285,"results":"38","hashOfConfig":"25"},{"size":2309,"mtime":1609956233507,"results":"39","hashOfConfig":"25"},{"size":402,"mtime":1609955733447,"results":"40","hashOfConfig":"25"},{"size":331,"mtime":1610272335876,"results":"41","hashOfConfig":"25"},{"size":5972,"mtime":1620370468222,"results":"42","hashOfConfig":"25"},{"size":9779,"mtime":1620731077342,"results":"43","hashOfConfig":"25"},{"size":101,"mtime":1620327187557,"results":"44","hashOfConfig":"25"},{"size":3625,"mtime":1620457316318,"results":"45","hashOfConfig":"25"},{"size":4000,"mtime":1621235951345,"results":"46","hashOfConfig":"25"},{"size":16933,"mtime":1621177326259,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"5ly33s",{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"50"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"50"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"95","messages":"96","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"50"},"C:\\react\\arriendo\\src\\index.js",[],["98","99"],"C:\\react\\arriendo\\src\\serviceWorker.js",[],"C:\\react\\arriendo\\src\\app\\store.js",[],"C:\\react\\arriendo\\src\\components\\App.js",[],"C:\\react\\arriendo\\src\\features\\userSlice.js",[],"C:\\react\\arriendo\\src\\firebase.js",[],"C:\\react\\arriendo\\src\\components\\Login.js",[],"C:\\react\\arriendo\\src\\components\\Nav.js",[],"C:\\react\\arriendo\\src\\components\\Banner.js",[],"C:\\react\\arriendo\\src\\api\\hostingApi.js",[],"C:\\react\\arriendo\\src\\components\\Map.js",["100","101","102"],"import React, { useEffect, useRef, useState } from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport './Map.css'\r\n\r\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\r\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\r\nimport { selectLat, selectLng } from '../features/positionSlice';\r\nimport { selectUser } from '../features/userSlice';\r\nimport hostingLocationApi from '../api/hostingLocationApi';\r\nimport { useHistory } from 'react-router';\r\nimport hostingApi from '../api/hostingApi';\r\n\r\nmapboxgl.workerClass = MapboxWorker;\r\nmapboxgl.accessToken = 'pk.eyJ1Ijoic2Fmd2FuLWJhcmRvbGlhIiwiYSI6ImNrb2IwaXI5MzAzYnkydm4xZWg4eDFkbmoifQ.2JbbEHLeVd5Y1BcuVHAyyQ';\r\n\r\nfunction Map() {\r\n\r\n    const mapContainer = useRef();\r\n\r\n\t\t// to track the url\r\n\t\tconst history = useHistory();\r\n\r\n    // get the userinfo from userSlice\r\n    const user = useSelector(selectUser);\r\n\r\n    // get the coordinates from positionSlice\r\n    // const latitude = useSelector(selectLat);\r\n    // const longitude = useSelector(selectLng);\r\n\r\n    // create state for lat & lng (because in this component lat & lng will change frequently. e.g as marker move)\r\n    // get default value from slice\r\n    const [lat,setLat] = useState(useSelector(selectLat));\r\n    const [lng,setLng] = useState(useSelector(selectLng));\r\n    const [zoom, setZoom] = useState(9);\r\n\r\n    // update when we get new users location (using gps)\r\n    const [renderMap, setRenderMap] = useState(false);\t\r\n\r\n    useEffect(()=>{\r\n\r\n\t\t\t// first check if the current user has submitted hosting info or not?\r\n\t\t\t// this is useful when user direct backdoor to the 'hosting/map' url\r\n\t\t\tasync function checkHosting() {\r\n\t\t\t\thostingApi.get(`/hostings/${user.uid}`)\r\n\t\t\t\t.then(resp=>{\r\n\t\t\t\t\tconsole.log(resp)\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t// if hosting data is not submitted then send user back to hostingForm\r\n\t\t\t\t\talert(`you have not submitted hosting info. first fill the hosting form`);\r\n\t\t\t\t\thistory.push('/hosting/form');\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tcheckHosting();\r\n\r\n\t\t\t// check if user has already submitted location or not?\r\n\t\t\tasync function checkLocation() {\r\n\t\t\t\thostingLocationApi.get(`/hostinglocations/${user.uid}`)\r\n\t\t\t\t.then(resp=>{\r\n\t\t\t\t\tconsole.log(resp);\r\n\t\t\t\t\t// if location is already been submitted by this user then move to next component\r\n\t\t\t\t\talert(`you have already add the location , try to update it ${resp.data.fullName}`);\r\n\t\t\t\t\thistory.push(\"/mapprofile\")\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tcheckLocation();\r\n\r\n\t\t\t// this function causes this component to render 2 times(because of setRenderMap())\r\n      // // get user's location\r\n      // window.navigator.geolocation.getCurrentPosition(\r\n\t\t\t// \t(position) => (\r\n\t\t\t// \t\tconsole.log(position.coords),\r\n\t\t\t// \t\tsetLat(position.coords.latitude.toFixed(4)),\r\n\t\t\t// \t\tsetLng(position.coords.longitude.toFixed(4)),\r\n\t\t\t\t\t\r\n\t\t\t// \t\t// without this center is not updated\r\n\t\t\t// \t\tsetRenderMap(true)\r\n\t\t\t// \t),\r\n\t\t\t// \t(err) => (\r\n\t\t\t// \t\tconsole.log(\"error in getting location\")\r\n\t\t\t// \t)\r\n    \t// )\r\n\r\n\r\n\t\t\t// initialize the map\r\n\t\t\tconst map = new mapboxgl.Map({\r\n\t\t\t\t\tcontainer: mapContainer.current,\r\n\t\t\t\t\tstyle: 'mapbox://styles/mapbox/streets-v11',\r\n\t\t\t\t\tcenter: [lng, lat],\r\n\t\t\t\t\tzoom: zoom\r\n\t\t\t});\r\n\r\n\t\t\t// add marker for default location\r\n\t\t\tconst marker = new mapboxgl.Marker({\r\n\t\t\t\t\tdraggable: true\r\n\t\t\t})\r\n\t\t\t.setLngLat([lng,lat])\r\n\t\t\t.addTo(map);\r\n\r\n\t\t\t// add draggable functionality\r\n\t\t\tmarker.on('drag',()=>{\r\n\t\t\t\t\tconst coordinates = marker.getLngLat();\r\n\t\t\t\t\t// updating co-ordinates on dragging\r\n\t\t\t\t\tsetLat(coordinates.lat.toFixed(4));\r\n\t\t\t\t\tsetLng(coordinates.lng.toFixed(4));\r\n\t\t\t})\r\n\r\n\t\t\t// to search places in map (after search center will be resultant lat & lng )\r\n\t\t\tconst geocoder = new MapboxGeocoder({\r\n\t\t\t\t\taccessToken: mapboxgl.accessToken,\r\n\t\t\t\t\tmapboxgl: mapboxgl,\r\n\t\t\t\t\t// not to display new marker\r\n\t\t\t\t\tmarker: false\r\n\t\t\t});\r\n\r\n\t\t\tmap.addControl(geocoder,'top-left')\r\n\r\n\t\t\tgeocoder.on('result',(e)=>{\r\n\t\t\t\tconsole.log(e.result);\r\n\r\n\t\t\t\t// update lat & lng\r\n\t\t\t\tsetLng(e.result.center[0]);\r\n\t\t\t\tsetLat(e.result.center[1]);\r\n\r\n\t\t\t\t// remove the old marker\r\n\t\t\t\tmarker.remove();\r\n\t\t\t\t\r\n\t\t\t\t// re-add the new marker\r\n\t\t\t\tconst marker1 = new mapboxgl.Marker({\r\n\t\t\t\t\t\tdraggable: true\r\n\t\t\t\t})\r\n\t\t\t\t.setLngLat(e.result.center)\r\n\t\t\t\t.addTo(map);\t\r\n\r\n\t\t\t\tmarker1.on('drag',()=>{\r\n\t\t\t\t\t\tconst coordinates = marker1.getLngLat();\r\n\t\t\t\t\t\t// updating co-ordinates on dragging\r\n\t\t\t\t\t\tsetLat(coordinates.lat.toFixed(4));\r\n\t\t\t\t\t\tsetLng(coordinates.lng.toFixed(4));\r\n\t\t\t\t})\r\n\r\n\t\t\t})\r\n\r\n        // unmounting\r\n        return () => map.remove();\r\n\r\n    },[renderMap])\r\n\r\n\t\tconst handleSubmit = (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\t// ******** post the data to backend **********\r\n\t\t\tconst formInfo = new FormData();\r\n\t\t\tformInfo.append('uid',user.uid);\r\n\t\t\tformInfo.append('email',user.email);\r\n\t\t\tformInfo.append('fullName',user.displayName);\r\n\t\t\tformInfo.append('latitude',lat);\r\n\t\t\tformInfo.append('longitude',lng);\r\n\r\n\t\t\tif(window.confirm(\"are you sure that this is your confirm hosting location?\")) {\r\n\t\t\t\t// **** posting to backend ****\r\n\t\t\t\thostingLocationApi.post('/hostinglocations', formInfo)\r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\talert(\"location successfully added\");\r\n\t\t\t\t\thistory.push(\"/profile\")\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\talert(err.message)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n    return (\r\n        <div className=\"map\">\r\n\t\t\t\t\t\t<div className=\"map__header\">\r\n\t\t\t\t\t\t\tmove marker to select your confirm location<br/>\r\n\t\t\t\t\t\t\tor<br/>\r\n\t\t\t\t\t\t\tsearch a place to confirm your location\r\n\t\t\t\t\t\t</div>\r\n            <div className=\"map__sidebar\">\r\n                Latitude: {lat} | Longitude: {lng} | Zoom: {zoom}\r\n            </div>\r\n            <div className=\"map__container\" ref={mapContainer}/>\r\n\t\t\t\t\t\t<form onSubmit={handleSubmit} noValidate>\r\n\t\t\t\t\t\t\t<button className=\"map__button\" type=\"submit\">submit location</button>\r\n\t\t\t\t\t\t</form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Map\r\n","C:\\react\\arriendo\\src\\components\\HostingForm.js",[],"C:\\react\\arriendo\\src\\features\\positionSlice.js",[],"C:\\react\\arriendo\\src\\components\\Footer.js",[],"C:\\react\\arriendo\\src\\components\\Home.js",[],"C:\\react\\arriendo\\src\\components\\Card.js",[],"C:\\react\\arriendo\\src\\components\\HostingInfo.js",[],"C:\\react\\arriendo\\src\\components\\HostMain.js",[],"C:\\react\\arriendo\\src\\components\\HostingProfile.js",[],"C:\\react\\arriendo\\src\\api\\hostingLocationApi.js",[],"C:\\react\\arriendo\\src\\components\\ProfileMap.js",["103"],"import { Button } from '@material-ui/core';\r\nimport { CheckSharp, Lock, SupervisedUserCircle } from '@material-ui/icons';\r\nimport React from 'react'\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router'\r\nimport hostingLocationApi from '../api/hostingLocationApi';\r\nimport { selectUser } from '../features/userSlice';\r\nimport Footer from './Footer';\r\nimport HostingInfo from './HostingInfo';\r\nimport './ProfileMap.css'\r\nimport UpdateMap from './UpdateMap';\r\n\r\n\r\nfunction ProfileMap() {\r\n\r\n  // to keep track of url\r\n  const history = useHistory();\r\n\r\n  const[locationData, setLocationData] = useState(null);\r\n\r\n  // this will rerender compponent (i.e after update)\r\n  const[render, setRender] = useState(false);\r\n\r\n  const user = useSelector(selectUser);\r\n\r\n  useEffect(()=>{\r\n    // if location is not present in db then catch function will called & locationData will remain null\r\n    async function getLocation() {\r\n      hostingLocationApi.get(`/hostinglocations/${user.uid}`)\r\n      .then(resp=>{\r\n        console.log(resp.data);\r\n        setLocationData(resp.data);\r\n      })\r\n      .catch(err=>{\r\n        console.log(err);\r\n      })  \r\n    }\r\n    getLocation();\r\n  },[user.uid,render])\r\n\r\n  // delete location\r\n  const deleteLocation = () => {\r\n    if(window.confirm(`${user.displayName}, do you want to delete your location`)) {\r\n      hostingLocationApi.delete(`/hostinglocations/${user.uid}`)\r\n      .then(resp=>{\r\n        console.log(resp);\r\n        // without this component will not re-render\r\n        setLocationData(null);\r\n        alert(\"location deleted successfully\")\r\n      })\r\n      .catch(err=>{\r\n        console.log(err)\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"profilemap\">\r\n      {locationData?(\r\n        <>\r\n          <div className=\"profilemap__top\">\r\n            <div className=\"profilemap__topleft\">\r\n                <h1>Profile</h1>\r\n                <h4>{user.email}.</h4>\r\n            </div>\r\n            <Button onClick={deleteLocation}>\r\n                delete location\r\n            </Button>\r\n          </div>\r\n          <UpdateMap locationData={locationData}/>\r\n        </>\r\n      ):(\r\n        <>\r\n          <div className=\"not__register\">\r\n            \r\n            <div className=\"not__register__top\">\r\n              <h4>you have not added your location yet</h4>\r\n                                \r\n              <Button onClick={()=>history.push(\"/hosting/map\")}>\r\n                  add location\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"hosting__info\">\r\n              <HostingInfo\r\n                  Icon={SupervisedUserCircle} \r\n                  title=\"Trust & Safety\"\r\n                  info=\"Trust & safety tools help you accept a booking only if you’re 100% comfortable.\"\r\n              />\r\n              <HostingInfo\r\n                  Icon={CheckSharp} \r\n                  title=\"Host Guarantee\"\r\n                  info=\"Your peace of mind is priceless. So we don’t charge for it. Every eligible booking on Makent is covered by our Host Guarantee - at no additional cost to you.\"\r\n              />\r\n              <HostingInfo \r\n                  Icon={Lock} \r\n                  title=\"Secure payments\"\r\n                  info=\"Our fast, flexible payment system puts money in your bank account after guests check out.\"\r\n                  last=\"last\"\r\n              />\r\n            </div>\r\n                        \r\n          </div>\r\n          <Footer/>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProfileMap\r\n","C:\\react\\arriendo\\src\\components\\UpdateMap.js",["104","105"],"C:\\react\\arriendo\\src\\components\\NearbyLocation.js",["106","107","108","109"],"import { useEffect, useState} from 'react';\r\nimport './NearbyLocation.css';\r\nimport MapIcon from '@material-ui/icons/Map';\r\nimport List from '@material-ui/icons/List';\r\n\r\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\r\nimport hostingApi from '../api/hostingApi';\r\nimport hostingLocationApi from '../api/hostingLocationApi';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectLat, selectLng } from '../features/positionSlice';\r\n\r\nif (!('remove' in Element.prototype)) {\r\n  Element.prototype.remove = function() {\r\n    if (this.parentNode) {\r\n      this.parentNode.removeChild(this);\r\n    }\r\n  };\r\n}\r\n\r\nmapboxgl.workerClass = MapboxWorker;\r\nmapboxgl.accessToken = 'pk.eyJ1Ijoic2Fmd2FuLWJhcmRvbGlhIiwiYSI6ImNrb2IwaXI5MzAzYnkydm4xZWg4eDFkbmoifQ.2JbbEHLeVd5Y1BcuVHAyyQ';\r\n\r\nfunction NearbyLocation() {\r\n\r\n  const[hostingData,setHostingData] = useState([]);\r\n  const[locationData,setLocationData] = useState([]);\r\n\r\n  // get default value from slice\r\n  const [lat,setLat] = useState(useSelector(selectLat));\r\n  const [lng,setLng] = useState(useSelector(selectLng));\r\n  \r\n  // for smaller screen this will decide text of button and\r\n  // it will also decide what to show on screen (sidebar or map) by changing class name\r\n  const[maptext, setMaptext] = useState(true);\r\n  \r\n  // when data with same user is present in both table then we merged \"\"hosting data into location data\"\"?? because some user had only fill the hosting data\r\n  // we assign location data to following var\r\n  // we have not use state here. because when merging, following var mutate multiple time so inorder to avoid multiple re-rendering we have used simple var\r\n  let finalMergedData = [];\r\n\r\n  let geojson = {\r\n    type: \"FeatureCollection\",\r\n    features: [],\r\n  };\r\n  \r\n  const merging = () => {\r\n    // step 1\r\n    // merge location data into var\r\n    // because we perform mutation on independent-state variable\r\n    finalMergedData.push(...locationData);\r\n    console.log(finalMergedData[0])\r\n\r\n    // step 2\r\n    // do the final merge, \r\n    if(finalMergedData.length!==0) {\r\n\r\n      hostingData.forEach((hosting)=>{\r\n        finalMergedData.forEach((location)=>{\r\n          if(hosting.uid===location.uid){\r\n            location.userProfileUrl=hosting.userProfileUrl;\r\n            location.fullName=hosting.fullName;\r\n            location.mobile=hosting.mobile;\r\n            location.description=hosting.description;\r\n            location.country=hosting.country;\r\n            location.state=hosting.state;\r\n            location.city=hosting.city;\r\n            location.address=hosting.address;\r\n            location.totalVehicles=hosting.totalVehicles;\r\n            location.fees=hosting.fees;\r\n            location.aadharFileUri=hosting.aadharFileUri;\r\n            location.residentialFileUri=hosting.residentialFileUri;\r\n            location.parkingPhotoUri=hosting.parkingPhotoUri;\r\n          }\r\n        })\r\n      })\r\n      \r\n    }\r\n\r\n    console.log(finalMergedData[0])\r\n\r\n  }\r\n\r\n  const jsonToGeojson = () => {\r\n    for(let i=0;i<finalMergedData.length;i++) {\r\n      geojson.features.push({\r\n        \"type\":\"Feature\",\r\n        \"geometry\": {\r\n          \"type\": \"Point\",\r\n          \"coordinates\": [finalMergedData[i].longitude, finalMergedData[i].latitude]\r\n        },\r\n        \"properties\": {\r\n          \"uid\": finalMergedData[i].uid,\r\n          \"userProfileUrl\": finalMergedData[i].userProfileUrl,\r\n          \"totalVehicles\": finalMergedData[i].totalVehicles,\r\n          \"state\": finalMergedData[i].state,\r\n          \"residentialFileUri\": finalMergedData[i].residentialFileUri,\r\n          \"parkingPhotoUri\": finalMergedData[i].parkingPhotoUri,\r\n          \"mobile\": finalMergedData[i].mobile,\r\n          \"latitude\": finalMergedData[i].latitude,\r\n          \"longitude\": finalMergedData[i].longitude,\r\n          \"fullName\": finalMergedData[i].fullName,\r\n          \"fees\": finalMergedData[i].fees,\r\n          \"email\": finalMergedData[i].email,\r\n          \"description\": finalMergedData[i].description,\r\n          \"country\": finalMergedData[i].country,\r\n          \"city\": finalMergedData[i].city,\r\n          \"address\": finalMergedData[i].address,\r\n          \"aadharFileUri\": finalMergedData[i].aadharFileUri,\r\n        \r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const loadMap=()=> {\r\n    if (!('remove' in Element.prototype)) {\r\n      Element.prototype.remove = function () {\r\n        if (this.parentNode) {\r\n          this.parentNode.removeChild(this);\r\n        }\r\n      };\r\n    }\r\n    \r\n    var map = new mapboxgl.Map({\r\n      container: 'nearbyLocation__map',\r\n      style: 'mapbox://styles/mapbox/streets-v11',\r\n      center: [lng, lat],\r\n      zoom: 12,\r\n      scrollZoom: false\r\n    });\r\n\r\n    map.on('load', function (e) {\r\n      /**\r\n      * This is where your '.addLayer()' used to be, instead\r\n      * add only the source without styling a layer\r\n      */\r\n      map.addSource('places', {\r\n      'type': 'geojson',\r\n      'data': geojson\r\n      });\r\n       \r\n      /**\r\n      * Add all the things to the page:\r\n      * - The location listings on the side of the page\r\n      * - The markers onto the map\r\n      */\r\n      buildLocationList();\r\n      addMarkers();\r\n    });\r\n\r\n    function addMarkers() {\r\n      /* For each feature in the GeoJSON object above: */\r\n      geojson.features.forEach(function (marker) {\r\n        /* Create a div element for the marker. */\r\n        var el = document.createElement('div');\r\n        /* Assign a unique `id` to the marker. */\r\n        el.id = 'marker-' + marker.properties.uid;\r\n        /* Assign the `marker` class to each marker for styling. */\r\n        el.className = 'marker';\r\n        \r\n        /**\r\n        * Create a marker using the div element\r\n        * defined above and add it to the map.\r\n        **/\r\n        new mapboxgl.Marker(el, { offset: [0, -23] })\r\n        .setLngLat(marker.geometry.coordinates)\r\n        .addTo(map);\r\n        \r\n        /**\r\n        * Listen to the element and when it is clicked, do three things:\r\n        * 1. Fly to the point\r\n        * 2. Close all other popups and display popup for clicked store\r\n        * 3. Highlight listing in sidebar (and remove highlight for all other listings)\r\n        **/\r\n        el.addEventListener('click', function (e) {\r\n          /* Fly to the point */\r\n          flyToStore(marker);\r\n          /* Close all other popups and display popup for clicked store */\r\n          createPopUp(marker);\r\n          /* Highlight listing in sidebar */\r\n          var activeItem = document.getElementsByClassName('active');\r\n          e.stopPropagation();\r\n          if (activeItem[0]) {\r\n            activeItem[0].classList.remove('active');\r\n          }\r\n          var listing = document.getElementById(\r\n          'listing-' + marker.properties.uid\r\n          );\r\n          listing.classList.add('active');\r\n          // this.parentNode.classList.add('active');\r\n        });\r\n      });\r\n    }\r\n\r\n    /**\r\n* Add a listing for each store to the sidebar.\r\n**/\r\n    function buildLocationList() {\r\n      geojson.features.forEach(function (store, i) {\r\n        /**\r\n        * Create a shortcut for `store.properties`,\r\n        * which will be used several times below.\r\n        **/\r\n        var prop = store.properties;\r\n        \r\n        /* Add a new listing section to the sidebar. */\r\n        var listings = document.getElementById('listings');\r\n        var listing = listings.appendChild(document.createElement('div'));\r\n        /* Assign a unique `id` to the listing. */\r\n        listing.id = 'listing-' + prop.uid;\r\n        /* Assign the `item` class to each listing for styling. */\r\n        listing.className = 'item';\r\n                \r\n        // /* Add details to the individual listing. */\r\n        // var details = listing.appendChild(document.createElement('div'));\r\n        // details.innerHTML = prop.city;\r\n        // // if (prop.phone) {\r\n        // //   details.innerHTML += ' &middot; ' + prop.phoneFormatted;\r\n        // // }\r\n\r\n        // add img inside listing\r\n        var img = listing.appendChild(document.createElement('img'));\r\n        img.src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ_wbPYTxQPMcBh7SPzLFActXnP3uhifeVT_g&usqp=CAU\";\r\n \r\n        /* Add the link to the individual listing created above. */\r\n        // var link = listing.appendChild(document.createElement('a'));\r\n        // link.href = '#';\r\n        // link.className = 'title';\r\n        // link.id = 'link-' + prop.uid;\r\n        // link.innerHTML = prop.address;\r\n        \r\n        \r\n        var listing__info = listing.appendChild(document.createElement('div'));\r\n        listing__info.className = 'listing__info';\r\n\r\n        // # listing__info start\r\n        \r\n        var listing__infoTop = listing__info.appendChild(document.createElement('div'));\r\n        listing__infoTop.className = 'listing__infoTop'\r\n\r\n          // * listing__infoTop start\r\n            var location = listing__infoTop.appendChild(document.createElement('p'))\r\n            location.innerHTML = `${prop.country} | ${prop.state} | ${prop.city}`\r\n\r\n            // var title = listing__infoTop.appendChild(document.createElement('h3'))\r\n            // title.innerHTML = prop.address\r\n\r\n            /* Add the link to the individual listing created above. */\r\n            var link = listing__infoTop.appendChild(document.createElement('a'));\r\n            link.href = '#';\r\n            link.className = 'title';\r\n            link.id = 'link-' + prop.uid;\r\n            link.innerHTML = prop.address;\r\n\r\n            var underscope = listing__infoTop.appendChild(document.createElement('p'))\r\n            underscope.innerHTML = '_____'\r\n            \r\n            var description = listing__infoTop.appendChild(document.createElement('p'))\r\n            description.innerHTML = `${prop.description} . ${prop.totalVehicles} space for vehicle . User ${prop.fullName} . Mobile ${prop.mobile}`\r\n          // * listing__infoTop end\r\n\r\n          \r\n          var listing__infoBottom = listing__info.appendChild(document.createElement('div'));\r\n          listing__infoBottom.className = 'listing__infoBottom'\r\n\r\n          // ** listing__infoBottom start\r\n            var stars = listing__infoBottom.appendChild(document.createElement('div'));\r\n            stars.className = 'listing_stars'\r\n\r\n              var stars_p = stars.appendChild(document.createElement('p'))\r\n              stars_p.innerHTML = '4.3'\r\n\r\n            var price = listing__infoBottom.appendChild(document.createElement('div'));\r\n            stars.className = 'listing_price'\r\n\r\n              var price_h2 = price.appendChild(document.createElement('h2'))\r\n              price_h2.innerHTML = `₹${prop.fees} / hour`\r\n          // ** listing__infoBottom end\r\n\r\n        // # listing__info end\r\n\r\n        /**\r\n        * Listen to the element and when it is clicked, do four things:\r\n        * 1. Update the `currentFeature` to the store associated with the clicked link\r\n        * 2. Fly to the point\r\n        * 3. Close all other popups and display popup for clicked store\r\n        * 4. Highlight listing in suidebar (and remove highlight for all other listings)\r\n        **/\r\n\r\n        // link.addEventListener('click', function (e) {\r\n        //   for (var i = 0; i < geojson.features.length; i++) {\r\n        //     if (this.id === 'link-' + geojson.features[i].properties.uid) {\r\n        //       var clickedListing = geojson.features[i];\r\n        //       flyToStore(clickedListing);\r\n        //       createPopUp(clickedListing);\r\n        //     }\r\n        //   }\r\n        //   var activeItem = document.getElementsByClassName('active');\r\n        //   if (activeItem[0]) {\r\n        //     activeItem[0].classList.remove('active');\r\n        //   }\r\n        //   this.parentNode.parentNode.parentNode.classList.add('active');\r\n        // });\r\n\r\n        listing.addEventListener('mouseover', function (e) {\r\n          for (var i = 0; i < geojson.features.length; i++) {\r\n            if (this.id === 'listing-' + geojson.features[i].properties.uid) {\r\n              var clickedListing = geojson.features[i];\r\n              flyToStore(clickedListing);\r\n              createPopUp(clickedListing);\r\n            }\r\n          }\r\n          var activeItem = document.getElementsByClassName('active');\r\n          if (activeItem[0]) {\r\n            activeItem[0].classList.remove('active');\r\n          }\r\n          this.classList.add('active');\r\n        });\r\n\r\n        // move to booking when user click on sidebar-listing-record\r\n        listing.addEventListener('click',()=>{\r\n          console.log(\"click on map1\")\r\n        })\r\n\r\n\r\n      });\r\n    }\r\n\r\n    function flyToStore(currentFeature) {\r\n      map.flyTo({\r\n      center: currentFeature.geometry.coordinates,\r\n      zoom: 15\r\n      });\r\n    }\r\n\r\n    function createPopUp(currentFeature) {\r\n      var popUps = document.getElementsByClassName('mapboxgl-popup');\r\n      if (popUps[0]) popUps[0].remove();\r\n      // var popup = new mapboxgl.Popup({ closeOnClick: false })\r\n      var popup = new mapboxgl.Popup()\r\n      .setLngLat(currentFeature.geometry.coordinates)\r\n      .setHTML(\r\n      // '<h3>Parking</h3>' +\r\n      // '<h4>' +\r\n      // currentFeature.properties.address +\r\n      // '</h4>'\r\n      `<div id='mapcard' class='mapcard'>\r\n        <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ_wbPYTxQPMcBh7SPzLFActXnP3uhifeVT_g&usqp=CAU'/>\r\n        <div class='mapcard__info'>\r\n          <h3>${currentFeature.properties.address}, ${currentFeature.properties.city} <br> </>\r\n          <h3>${currentFeature.properties.description} <br> ${currentFeature.properties.totalVehicles} space for vehicle - ${currentFeature.properties.mobile} <br> </>\r\n          <h2>₹${currentFeature.properties.fees} / hour</>\r\n        </div>\r\n      </div>`\r\n      )\r\n      .addTo(map);\r\n\r\n      // move to booking when user click on mapcard\r\n      var mapcard = document.getElementById(\"mapcard\");\r\n      mapcard.addEventListener('click',()=>{\r\n        console.log(\"click on map\")\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n\r\n    const getData = async() => {\r\n      try {\r\n        const res = await hostingApi.get(`/hostings`);\r\n        setHostingData(res.data);\r\n      } catch(err) {\r\n        console.log(err)\r\n      }\r\n\r\n      try {\r\n        const res = await hostingLocationApi.get(`/hostinglocations`);\r\n        setLocationData(res.data);  \r\n      } catch(err) {\r\n        console.log(err)\r\n      }\r\n\r\n    } \r\n    \r\n    // means when locationData fetching is complete\r\n    if(locationData.length!==0) {\r\n      merging();\r\n      jsonToGeojson();\r\n    }  \r\n\r\n    console.log(geojson)\r\n    \r\n    if(geojson.length!==0) {\r\n      loadMap();\r\n    }\r\n\r\n    // calling async function\r\n    getData();   \r\n\r\n  },[locationData.length])\r\n\r\n  // for smaller screen, this will decide whether to display sidebar or map\r\n  const hideAndShowMapAndSidebar = () => {\r\n    if(maptext) {\r\n      // we are going to display list\r\n\r\n      // hide map\r\n      // remove 'show' class from map & add 'hide'\r\n      document.getElementById(\"nearbyLocation__map\").classList.remove('show')\r\n      document.getElementById(\"nearbyLocation__map\").classList.add('hide')\r\n\r\n      // show sidebar\r\n      // remove 'hide' class from sidebar & add 'show'\r\n      document.getElementById(\"nearbyLocation__sidebar\").classList.remove('hide')\r\n      document.getElementById(\"nearbyLocation__sidebar\").classList.add('show')      \r\n\r\n    } else {\r\n      // we are going to display map\r\n\r\n      // hide sidebar\r\n      // remove 'show' class from nearbyLocation__sidebar & add 'hide'\r\n      document.getElementById(\"nearbyLocation__sidebar\").classList.remove('show')\r\n      document.getElementById(\"nearbyLocation__sidebar\").classList.add('hide')\r\n\r\n      // show map\r\n      // remove 'hide' class from map & add 'show'\r\n      document.getElementById(\"nearbyLocation__map\").classList.remove('hide')\r\n      document.getElementById(\"nearbyLocation__map\").classList.add('show')\r\n\r\n    }\r\n    setMaptext(!maptext);\r\n  }\r\n\r\n  return (\r\n    <div className=\"nearbyLocation\">\r\n\r\n        {/* remember we only target 'hide' & 'show' class for screen < 1100px   */}\r\n      <div id=\"nearbyLocation__sidebar\" className=\"nearbyLocation__sidebar hide\">\r\n        <div className=\"nearbyLocation__heading\">\r\n          <h1>nearby parking location</h1>\r\n        </div>\r\n        <div id=\"listings\" className=\"listings\">\r\n\r\n        </div>\r\n      </div>\r\n      \r\n      <div id=\"nearbyLocation__map\" className=\"nearbyLocation__map show\">\r\n\r\n      </div>\r\n\r\n      <div className=\"nearbyLocation__button\" onClick={hideAndShowMapAndSidebar}>\r\n        <h4>{maptext?'list':'map'}</h4>\r\n        {maptext?<List/>:<MapIcon/>}\r\n      </div>\r\n      {/* <Button onClick={hideAndShowMapAndSidebar}>{maptext?'list':'map'}</Button> */}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NearbyLocation;\r\n",{"ruleId":"110","replacedBy":"111"},{"ruleId":"112","replacedBy":"113"},{"ruleId":"114","severity":1,"message":"115","line":36,"column":18,"nodeType":"116","messageId":"117","endLine":36,"endColumn":25},{"ruleId":"114","severity":1,"message":"118","line":39,"column":23,"nodeType":"116","messageId":"117","endLine":39,"endColumn":35},{"ruleId":"119","severity":1,"message":"120","line":155,"column":7,"nodeType":"121","endLine":155,"endColumn":18,"suggestions":"122"},{"ruleId":"114","severity":1,"message":"123","line":24,"column":17,"nodeType":"116","messageId":"117","endLine":24,"endColumn":26},{"ruleId":"114","severity":1,"message":"115","line":24,"column":16,"nodeType":"116","messageId":"117","endLine":24,"endColumn":23},{"ruleId":"119","severity":1,"message":"124","line":89,"column":5,"nodeType":"121","endLine":89,"endColumn":7,"suggestions":"125"},{"ruleId":"114","severity":1,"message":"126","line":31,"column":14,"nodeType":"116","messageId":"117","endLine":31,"endColumn":20},{"ruleId":"114","severity":1,"message":"127","line":32,"column":14,"nodeType":"116","messageId":"117","endLine":32,"endColumn":20},{"ruleId":"114","severity":1,"message":"128","line":342,"column":11,"nodeType":"116","messageId":"117","endLine":342,"endColumn":16},{"ruleId":"119","severity":1,"message":"129","line":403,"column":5,"nodeType":"121","endLine":403,"endColumn":26,"suggestions":"130"},"no-native-reassign",["131"],"no-negated-in-lhs",["132"],"no-unused-vars","'setZoom' is assigned a value but never used.","Identifier","unusedVar","'setRenderMap' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'history', 'lat', 'lng', 'user.uid', and 'zoom'. Either include them or remove the dependency array.","ArrayExpression",["133"],"'setRender' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'lat', 'lng', and 'zoom'. Either include them or remove the dependency array.",["134"],"'setLat' is assigned a value but never used.","'setLng' is assigned a value but never used.","'popup' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'geojson', 'jsonToGeojson', 'loadMap', and 'merging'. Either include them or remove the dependency array.",["135"],"no-global-assign","no-unsafe-negation",{"desc":"136","fix":"137"},{"desc":"138","fix":"139"},{"desc":"140","fix":"141"},"Update the dependencies array to be: [history, lat, lng, renderMap, user.uid, zoom]",{"range":"142","text":"143"},"Update the dependencies array to be: [lat, lng, zoom]",{"range":"144","text":"145"},"Update the dependencies array to be: [geojson, jsonToGeojson, loadMap, locationData.length, merging]",{"range":"146","text":"147"},[4791,4802],"[history, lat, lng, renderMap, user.uid, zoom]",[2629,2631],"[lat, lng, zoom]",[14824,14845],"[geojson, jsonToGeojson, loadMap, locationData.length, merging]"]