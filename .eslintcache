[{"C:\\react\\arriendo\\src\\index.js":"1","C:\\react\\arriendo\\src\\serviceWorker.js":"2","C:\\react\\arriendo\\src\\app\\store.js":"3","C:\\react\\arriendo\\src\\components\\App.js":"4","C:\\react\\arriendo\\src\\features\\userSlice.js":"5","C:\\react\\arriendo\\src\\firebase.js":"6","C:\\react\\arriendo\\src\\components\\Login.js":"7","C:\\react\\arriendo\\src\\components\\Nav.js":"8","C:\\react\\arriendo\\src\\components\\Banner.js":"9","C:\\react\\arriendo\\src\\api\\hostingApi.js":"10","C:\\react\\arriendo\\src\\components\\Map.js":"11","C:\\react\\arriendo\\src\\components\\HostingForm.js":"12","C:\\react\\arriendo\\src\\features\\positionSlice.js":"13","C:\\react\\arriendo\\src\\components\\Footer.js":"14","C:\\react\\arriendo\\src\\components\\Home.js":"15","C:\\react\\arriendo\\src\\components\\Card.js":"16","C:\\react\\arriendo\\src\\components\\HostingInfo.js":"17","C:\\react\\arriendo\\src\\components\\HostMain.js":"18","C:\\react\\arriendo\\src\\components\\HostingProfile.js":"19","C:\\react\\arriendo\\src\\api\\hostingLocationApi.js":"20","C:\\react\\arriendo\\src\\components\\ProfileMap.js":"21","C:\\react\\arriendo\\src\\components\\UpdateMap.js":"22"},{"size":655,"mtime":1608878335259,"results":"23","hashOfConfig":"24"},{"size":5141,"mtime":499162500000,"results":"25","hashOfConfig":"24"},{"size":273,"mtime":1611250233022,"results":"26","hashOfConfig":"24"},{"size":2970,"mtime":1620414072025,"results":"27","hashOfConfig":"24"},{"size":978,"mtime":1608878157204,"results":"28","hashOfConfig":"24"},{"size":927,"mtime":1619893241441,"results":"29","hashOfConfig":"24"},{"size":1650,"mtime":1610361977006,"results":"30","hashOfConfig":"24"},{"size":2164,"mtime":1620410437409,"results":"31","hashOfConfig":"24"},{"size":427,"mtime":1609954424903,"results":"32","hashOfConfig":"24"},{"size":101,"mtime":1609237294150,"results":"33","hashOfConfig":"24"},{"size":6142,"mtime":1620410449731,"results":"34","hashOfConfig":"24"},{"size":18327,"mtime":1620371044249,"results":"35","hashOfConfig":"24"},{"size":850,"mtime":1609609979086,"results":"36","hashOfConfig":"24"},{"size":283,"mtime":1609940588285,"results":"37","hashOfConfig":"24"},{"size":2309,"mtime":1609956233507,"results":"38","hashOfConfig":"24"},{"size":402,"mtime":1609955733447,"results":"39","hashOfConfig":"24"},{"size":331,"mtime":1610272335876,"results":"40","hashOfConfig":"24"},{"size":5972,"mtime":1620370468222,"results":"41","hashOfConfig":"24"},{"size":8942,"mtime":1620414131674,"results":"42","hashOfConfig":"24"},{"size":101,"mtime":1620327187557,"results":"43","hashOfConfig":"24"},{"size":3625,"mtime":1620457316318,"results":"44","hashOfConfig":"24"},{"size":3999,"mtime":1620465242294,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"5ly33s",{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"48"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"90","messages":"91","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\react\\arriendo\\src\\index.js",[],["92","93"],"C:\\react\\arriendo\\src\\serviceWorker.js",[],"C:\\react\\arriendo\\src\\app\\store.js",[],"C:\\react\\arriendo\\src\\components\\App.js",[],"C:\\react\\arriendo\\src\\features\\userSlice.js",[],"C:\\react\\arriendo\\src\\firebase.js",[],"C:\\react\\arriendo\\src\\components\\Login.js",[],"C:\\react\\arriendo\\src\\components\\Nav.js",[],"C:\\react\\arriendo\\src\\components\\Banner.js",[],"C:\\react\\arriendo\\src\\api\\hostingApi.js",[],"C:\\react\\arriendo\\src\\components\\Map.js",["94","95","96"],"import React, { useEffect, useRef, useState } from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport './Map.css'\r\n\r\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\r\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\r\nimport { selectLat, selectLng } from '../features/positionSlice';\r\nimport { selectUser } from '../features/userSlice';\r\nimport hostingLocationApi from '../api/hostingLocationApi';\r\nimport { useHistory } from 'react-router';\r\nimport hostingApi from '../api/hostingApi';\r\n\r\nmapboxgl.workerClass = MapboxWorker;\r\nmapboxgl.accessToken = 'pk.eyJ1Ijoic2Fmd2FuLWJhcmRvbGlhIiwiYSI6ImNrb2IwaXI5MzAzYnkydm4xZWg4eDFkbmoifQ.2JbbEHLeVd5Y1BcuVHAyyQ';\r\n\r\nfunction Map() {\r\n\r\n    const mapContainer = useRef();\r\n\r\n\t\t// to track the url\r\n\t\tconst history = useHistory();\r\n\r\n    // get the userinfo from userSlice\r\n    const user = useSelector(selectUser);\r\n\r\n    // get the coordinates from positionSlice\r\n    // const latitude = useSelector(selectLat);\r\n    // const longitude = useSelector(selectLng);\r\n\r\n    // create state for lat & lng (because in this component lat & lng will change frequently. e.g as marker move)\r\n    // get default value from slice\r\n    const [lat,setLat] = useState(useSelector(selectLat));\r\n    const [lng,setLng] = useState(useSelector(selectLng));\r\n    const [zoom, setZoom] = useState(9);\r\n\r\n    // update when we get new users location (using gps)\r\n    const [renderMap, setRenderMap] = useState(false);\t\r\n\r\n    useEffect(()=>{\r\n\r\n\t\t\t// first check if the current user has submitted hosting info or not?\r\n\t\t\t// this is useful when user direct backdoor to the 'hosting/map' url\r\n\t\t\tasync function checkHosting() {\r\n\t\t\t\thostingApi.get(`/hostings/${user.uid}`)\r\n\t\t\t\t.then(resp=>{\r\n\t\t\t\t\tconsole.log(resp)\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t// if hosting data is not submitted then send user back to hostingForm\r\n\t\t\t\t\talert(`you have not submitted hosting info. first fill the hosting form`);\r\n\t\t\t\t\thistory.push('/hosting/form');\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tcheckHosting();\r\n\r\n\t\t\t// check if user has already submitted location or not?\r\n\t\t\tasync function checkLocation() {\r\n\t\t\t\thostingLocationApi.get(`/hostinglocations/${user.uid}`)\r\n\t\t\t\t.then(resp=>{\r\n\t\t\t\t\tconsole.log(resp);\r\n\t\t\t\t\t// if location is already been submitted by this user then move to next component\r\n\t\t\t\t\talert(`you have already add the location , try to update it ${resp.data.fullName}`);\r\n\t\t\t\t\thistory.push(\"/mapprofile\")\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tcheckLocation();\r\n\r\n\t\t\t// this function causes this component to render 2 times(because of setRenderMap())\r\n      // // get user's location\r\n      // window.navigator.geolocation.getCurrentPosition(\r\n\t\t\t// \t(position) => (\r\n\t\t\t// \t\tconsole.log(position.coords),\r\n\t\t\t// \t\tsetLat(position.coords.latitude.toFixed(4)),\r\n\t\t\t// \t\tsetLng(position.coords.longitude.toFixed(4)),\r\n\t\t\t\t\t\r\n\t\t\t// \t\t// without this center is not updated\r\n\t\t\t// \t\tsetRenderMap(true)\r\n\t\t\t// \t),\r\n\t\t\t// \t(err) => (\r\n\t\t\t// \t\tconsole.log(\"error in getting location\")\r\n\t\t\t// \t)\r\n    \t// )\r\n\r\n\r\n\t\t\t// initialize the map\r\n\t\t\tconst map = new mapboxgl.Map({\r\n\t\t\t\t\tcontainer: mapContainer.current,\r\n\t\t\t\t\tstyle: 'mapbox://styles/mapbox/streets-v11',\r\n\t\t\t\t\tcenter: [lng, lat],\r\n\t\t\t\t\tzoom: zoom\r\n\t\t\t});\r\n\r\n\t\t\t// add marker for default location\r\n\t\t\tconst marker = new mapboxgl.Marker({\r\n\t\t\t\t\tdraggable: true\r\n\t\t\t})\r\n\t\t\t.setLngLat([lng,lat])\r\n\t\t\t.addTo(map);\r\n\r\n\t\t\t// add draggable functionality\r\n\t\t\tmarker.on('drag',()=>{\r\n\t\t\t\t\tconst coordinates = marker.getLngLat();\r\n\t\t\t\t\t// updating co-ordinates on dragging\r\n\t\t\t\t\tsetLat(coordinates.lat.toFixed(4));\r\n\t\t\t\t\tsetLng(coordinates.lng.toFixed(4));\r\n\t\t\t})\r\n\r\n\t\t\t// to search places in map (after search center will be resultant lat & lng )\r\n\t\t\tconst geocoder = new MapboxGeocoder({\r\n\t\t\t\t\taccessToken: mapboxgl.accessToken,\r\n\t\t\t\t\tmapboxgl: mapboxgl,\r\n\t\t\t\t\t// not to display new marker\r\n\t\t\t\t\tmarker: false\r\n\t\t\t});\r\n\r\n\t\t\tmap.addControl(geocoder,'top-left')\r\n\r\n\t\t\tgeocoder.on('result',(e)=>{\r\n\t\t\t\tconsole.log(e.result);\r\n\r\n\t\t\t\t// update lat & lng\r\n\t\t\t\tsetLng(e.result.center[0]);\r\n\t\t\t\tsetLat(e.result.center[1]);\r\n\r\n\t\t\t\t// remove the old marker\r\n\t\t\t\tmarker.remove();\r\n\t\t\t\t\r\n\t\t\t\t// re-add the new marker\r\n\t\t\t\tconst marker1 = new mapboxgl.Marker({\r\n\t\t\t\t\t\tdraggable: true\r\n\t\t\t\t})\r\n\t\t\t\t.setLngLat(e.result.center)\r\n\t\t\t\t.addTo(map);\t\r\n\r\n\t\t\t\tmarker1.on('drag',()=>{\r\n\t\t\t\t\t\tconst coordinates = marker1.getLngLat();\r\n\t\t\t\t\t\t// updating co-ordinates on dragging\r\n\t\t\t\t\t\tsetLat(coordinates.lat.toFixed(4));\r\n\t\t\t\t\t\tsetLng(coordinates.lng.toFixed(4));\r\n\t\t\t\t})\r\n\r\n\t\t\t})\r\n\r\n        // unmounting\r\n        return () => map.remove();\r\n\r\n    },[renderMap])\r\n\r\n\t\tconst handleSubmit = (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\t// ******** post the data to backend **********\r\n\t\t\tconst formInfo = new FormData();\r\n\t\t\tformInfo.append('uid',user.uid);\r\n\t\t\tformInfo.append('email',user.email);\r\n\t\t\tformInfo.append('fullName',user.displayName);\r\n\t\t\tformInfo.append('latitude',lat);\r\n\t\t\tformInfo.append('longitude',lng);\r\n\r\n\t\t\tif(window.confirm(\"are you sure that this is your confirm hosting location?\")) {\r\n\t\t\t\t// **** posting to backend ****\r\n\t\t\t\thostingLocationApi.post('/hostinglocations', formInfo)\r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\talert(\"location successfully added\");\r\n\t\t\t\t\thistory.push(\"/profile\")\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\talert(err.message)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n    return (\r\n        <div className=\"map\">\r\n\t\t\t\t\t\t<div className=\"map__header\">\r\n\t\t\t\t\t\t\tmove marker to select your confirm location<br/>\r\n\t\t\t\t\t\t\tor<br/>\r\n\t\t\t\t\t\t\tsearch a place to confirm your location\r\n\t\t\t\t\t\t</div>\r\n            <div className=\"map__sidebar\">\r\n                Latitude: {lat} | Longitude: {lng} | Zoom: {zoom}\r\n            </div>\r\n            <div className=\"map__container\" ref={mapContainer}/>\r\n\t\t\t\t\t\t<form onSubmit={handleSubmit} noValidate>\r\n\t\t\t\t\t\t\t<button className=\"map__button\" type=\"submit\">submit location</button>\r\n\t\t\t\t\t\t</form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Map\r\n","C:\\react\\arriendo\\src\\components\\HostingForm.js",[],"C:\\react\\arriendo\\src\\features\\positionSlice.js",[],"C:\\react\\arriendo\\src\\components\\Footer.js",[],"C:\\react\\arriendo\\src\\components\\Home.js",[],"C:\\react\\arriendo\\src\\components\\Card.js",[],"C:\\react\\arriendo\\src\\components\\HostingInfo.js",[],"C:\\react\\arriendo\\src\\components\\HostMain.js",[],"C:\\react\\arriendo\\src\\components\\HostingProfile.js",[],"C:\\react\\arriendo\\src\\api\\hostingLocationApi.js",[],"C:\\react\\arriendo\\src\\components\\ProfileMap.js",["97"],"C:\\react\\arriendo\\src\\components\\UpdateMap.js",["98","99"],{"ruleId":"100","replacedBy":"101"},{"ruleId":"102","replacedBy":"103"},{"ruleId":"104","severity":1,"message":"105","line":36,"column":18,"nodeType":"106","messageId":"107","endLine":36,"endColumn":25},{"ruleId":"104","severity":1,"message":"108","line":39,"column":23,"nodeType":"106","messageId":"107","endLine":39,"endColumn":35},{"ruleId":"109","severity":1,"message":"110","line":155,"column":7,"nodeType":"111","endLine":155,"endColumn":18,"suggestions":"112"},{"ruleId":"104","severity":1,"message":"113","line":24,"column":17,"nodeType":"106","messageId":"107","endLine":24,"endColumn":26},{"ruleId":"104","severity":1,"message":"105","line":24,"column":16,"nodeType":"106","messageId":"107","endLine":24,"endColumn":23},{"ruleId":"109","severity":1,"message":"114","line":89,"column":5,"nodeType":"111","endLine":89,"endColumn":7,"suggestions":"115"},"no-native-reassign",["116"],"no-negated-in-lhs",["117"],"no-unused-vars","'setZoom' is assigned a value but never used.","Identifier","unusedVar","'setRenderMap' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'history', 'lat', 'lng', 'user.uid', and 'zoom'. Either include them or remove the dependency array.","ArrayExpression",["118"],"'setRender' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'lat', 'lng', and 'zoom'. Either include them or remove the dependency array.",["119"],"no-global-assign","no-unsafe-negation",{"desc":"120","fix":"121"},{"desc":"122","fix":"123"},"Update the dependencies array to be: [history, lat, lng, renderMap, user.uid, zoom]",{"range":"124","text":"125"},"Update the dependencies array to be: [lat, lng, zoom]",{"range":"126","text":"127"},[4791,4802],"[history, lat, lng, renderMap, user.uid, zoom]",[2628,2630],"[lat, lng, zoom]"]